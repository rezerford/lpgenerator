<!doctype html>
<html>
<head>
   	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   	<meta name="Author" content="Rezerford">
   	<meta name="Description" content="">
   	<meta name="KeyWords" content="">
   	<title>Landing Page Generator</title>

   	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
	<script src="media/js/colorpicker.js"></script>
	
    <link href="media/css/main.css" rel="stylesheet">
    <link href="media/css/colorpicker.css" rel="stylesheet">
	<link href="media/css/layout.css" rel="stylesheet">
</head>
<body class="ui-page-theme-a">
	<div class="ui-body-b ui-body r-top-panel">
		<div data-role="tabs" id="tabs">
			<div data-role="navbar">
		        <ul>
		            <li><a href="#tools" data-icon="grid" class="ui-btn-active">Basic Tools</a></li>
		            <li><a href="#style" data-icon="star">Other Tools</a></li>
		            <li><a href="#format" data-icon="gear">Format</a></li>
		            <li><a href="#" data-icon="action">Publish</a></li>
		            <li><a href="#" data-icon="arrow-r">Redo</a></li>
		        </ul>
		    </div><!-- /navbar -->
		    <div id="tools" class="ui-bar-a r-tools-panel">
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-shop ui-btn-icon-left ui-mini">Save</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-search ui-btn-icon-left ui-mini">Preview</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-star ui-btn-icon-left ui-mini" onclick="LP.addElement('section');">Section</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-bars ui-btn-icon-left ui-mini" onclick="LP.addElement('block');">Block</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-camera ui-btn-icon-left ui-mini">Image</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-video ui-btn-icon-left ui-mini">Video</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-edit ui-btn-icon-left ui-mini">Text</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-power ui-btn-icon-left ui-mini">Button</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-check ui-btn-icon-left ui-mini">Forms</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-tag ui-btn-icon-left ui-mini">HTML</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-tag ui-btn-icon-left ui-mini">JS</button>
		    	<div class="r-right-tools">
		    		<span class="r-right-tools-text">Rules:</span>
					<select name="slider-flip-m" id="slider-flip-m" data-role="slider" data-mini="true">
					    <option value="off">Off</option>
					    <option value="on" selected="">On</option>
					</select>
		    		<span class="r-right-tools-text">Grid:</span>
					<select name="slider-flip-m" id="slider-flip-m" data-role="slider" data-mini="true">
					    <option value="off">Off</option>
					    <option value="on" selected="">On</option>
					</select>

		    	</div>
		  	</div>
		  	<div id="style" class="ui-bar-a r-tools-panel">
				<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-eye ui-btn-icon-left ui-mini">Fill</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-eye ui-btn-icon-left ui-mini">Border</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-cloud ui-btn-icon-left ui-mini">Effects</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-cloud ui-btn-icon-left ui-mini">Shadow</button>
		    	<button class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-gear ui-btn-icon-left ui-mini">Settings</button>
		  	</div>
	  	</div>
	</div>
	<div class="ui-body-b ui-body r-main-panel">
		<div class="ui-grid-a">
		    <div class="ui-block-a" style="width:80%;">
		    	<div class="ui-bar ui-bar-b" style="height:943px;border-radius: 20px 0px 0px 20px;">
		    		<iframe sandbox="allow-same-origin allow-scripts" style="width:100%;height:920px;border:none;background:#E9E9E9;border-radius:20px;" src="site/index.html" id="workspace" onload="LP.initWorkspace();"></iframe>
		    	</div>
		    </div>
		    <div class="ui-block-b" style="width:20%;">
		    	<div class="ui-bar ui-bar-a" style="height:943px;border-radius: 0px 20px 20px 0px;overflow:auto;" id="lp-tools">
					<div id="tools_section" style="display:none">
						<table class="section_tbl_styles" cellpadding="5" cellspacing="5">
							<thead>
								<th width="20%"></th>
								<th width="80%"></th>
							</thead>
							<tbody>
								<tr>
									<td colspan="2" id="caption">Action</td>
								</tr>
								<tr>
									<td colspan="2">
										<a href="#popupDialog" id="delete-element" data-rel="popup" data-position-to="window" data-transition="pop" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-delete ui-btn-icon-left ui-btn-b ui-mini">Delete</a>
										<a href="#copyDialog" id="copy-element" data-rel="popup" data-position-to="window" data-transition="pop" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-action ui-btn-icon-left ui-btn-b ui-mini">Copy</a>
										<a href="javascript:void(0);" onclick="javascript:LP.pasteElement();" id="paste-element" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-action ui-btn-icon-left ui-btn-b ui-mini">Paste</a>
									</td>
								</tr>
								<tr>
									<td colspan="2" id="caption">Basic style</td>
								</tr>
								<tr>
									<td>
										<span>Width:</span>
									</td>
									<td>
										<input name="width" id="width" value="100%" type="text" onchange="LP.changeWidth();" class="input"/>
									</td>
								</tr>
								<tr>
									<td>
										<span>Height:</span>
									</td>
									<td>
										<input name="height" id="height" value="150" type="text" onchange="LP.changeHeight();" class="input"/>
									</td>
								</tr>
								<tr>
									<td>
										<span>Z-index:</span>
									</td>
									<td>
										<input name="z-index" id="z-index" data-mini="true" data-highlight="true" min="0" max="100" value="1" type="range" onchange="LP.changeZIndex();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Opacity:</span>
									</td>
									<td>
										<input name="opacity" id="opacity" data-mini="true" data-highlight="true" min="0" max="1" step="0.1" value="1" type="range" onchange="LP.changeOpacity();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Background color:</span>
									</td>
									<td>
										<div id="colorSelectorBackground">
											<div></div>
										</div>
									</td>
								</tr>
								<tr>
									<td colspan="2" id="caption">Border</td>
								</tr>
								<tr>
									<td>
										<span>Border color:</span>
									</td>
									<td>
										<div id="colorSelectorBorder">
											<div></div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<span>Border type:</span>
									</td>
									<td>
										<select id="border-style" class="input" onchange="LP.changeBorderStyle()">
											<option value="solid">solid</option>
											<option value="dotted">dotted</option>
											<option value="dashed">dashed</option>
											<option value="double">double</option>
											<option value="groove">groove</option>
											<option value="inset">inset</option>
											<option value="outset">outset</option>
											<option value="ridge">ridge</option>
										</select>
									</td>
								</tr>
								<tr>
									<td>
										<span>Border width:</span>
									</td>
									<td>
										<input name="border-width" id="border-width" data-mini="true" data-highlight="true" min="0" max="20" value="0" type="range" onchange="LP.changeBorderWidth();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Border radius:</span>
									</td>
									<td>
										<input name="border-radius" id="border-radius" data-mini="true" data-highlight="true" min="0" max="30" value="0" type="range" onchange="LP.changeBorder();">
									</td>
								</tr>
								<tr>
									<td colspan="2" id="caption">Shadow</td>
								</tr>
								<tr>
									<td>Inset?</td>
									<td>
										<select name="slider-flip-m" id="shadow-inset" data-role="slider" data-mini="true" onchange="LP.changeShadow();">
										    <option value="off" selected="selected">Off</option>
										    <option value="on">On</option>
										</select>
									</td>
								</tr>
								<tr>
									<td>
										<span>X offset:</span>
									</td>
									<td>
										<input id="shadow-x-offset" data-mini="true" data-highlight="true" min="-50" max="50" value="0" type="range" onchange="LP.changeShadow();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Y offset:</span>
									</td>
									<td>
										<input id="shadow-y-offset" data-mini="true" data-highlight="true" min="-50" max="50" value="0" type="range" onchange="LP.changeShadow();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Blur radius:</span>
									</td>
									<td>
										<input id="shadow-blur-radius" data-mini="true" data-highlight="true" min="0" max="50" value="0" type="range" onchange="LP.changeShadow();">
										
									</td>
								</tr>
								<tr>
									<td>
										<span>Shadow color:</span>
									</td>
									<td>
										<div id="colorSelectorShadow">
											<div></div>
										</div>
										<input type="hidden" id="shadow-color" value="rgba(0,0,0,0.5)"/>
									</td>
								</tr>
								<tr>
									<td colspan="2" id="caption">Linear Gradient</td>
								</tr>
								<tr>
									<td>
										<span>Angle:</span>
									</td>
									<td>
										<input id="l-gradient-angle" data-mini="true" data-highlight="true" min="-180" max="180" value="0" type="range" onchange="LP.changeLinearGradient();">
									</td>
								</tr>
								<tr>
									<td>
										<span>Position:</span>
									</td>
									<td>
										<select id="l-gradient-position" class="input" onchange="LP.changeLinearGradient()">
											<option value="top">top</option>
											<option value="left">left</option>
											<option value="bottom">bottom</option>
											<option value="right">right</option>
											<option value="top left">top left</option>
											<option value="top right">top right</option>
											<option value="bottom left">bottom left</option>
											<option value="bottom right">bottom right</option>
										</select>
									</td>
								</tr>
								<tr>
									<td>
										<span>Start color:</span>
									</td>
									<td>
										<div id="colorSelectorStart">
											<div></div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<span>End color:</span>
									</td>
									<td>
										<div id="colorSelectorEnd">
											<div></div>
										</div>
									</td>
								</tr>
								<tr>
									<td colspan="2" id="caption">Text</td>
								</tr>
								<tr>
									<td>
										<span>Padding:</span>
									</td>
									<td>
										<select id="padding-side" class="input">
											<option value="all">allside</option>
											<option value="top">top</option>
											<option value="left">left</option>
											<option value="bottom">bottom</option>
											<option value="right">right</option>
										</select>
										<br/>
										<input type="text" name="text-padding" id="text-padding" size="35" value="" class="input" onchange="LP.changeTextPadding()"/>
									</td>
								</tr>
								<tr>
									<td>
										<span>Font color:</span>
									</td>
									<td>
										<div id="colorSelectorFont">
											<div></div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<span>Font Size:</span>
									</td>
									<td>
										<input type="text" name="text-font-size" id="text-font-size" size="35" value="" class="input" onchange="LP.changeFontsize()"/>
									</td>
								</tr>
								<tr>
									<td>
										<span>Text align:</span>
									</td>
									<td>
										<select id="text-align" class="input" onchange="LP.changeTextAlign()">
											<option value="justify">justify</option>
											<option value="center">center</option>
											<option value="left">left</option>
											<option value="right">right</option>
										</select>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
		    </div>
		</div><!-- /grid-a -->
	</div>
	<!-- Popup-->
	<div data-role="popup" id="popupDialog" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
	    <div data-role="header" data-theme="a">
	    	<h1>Delete Element?</h1>
	    </div>
	    <div role="main" class="ui-content">
	        <h3 class="ui-title">Are you sure you want to delete this element?</h3>
	    	<p>This action cannot be undone.</p>
	        <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
	        <a href="#" onclick="javascript:LP.deleteElement();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Delete</a>
	    </div>
	</div>
	<div data-role="popup" id="copyDialog" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
	    <div data-role="header" data-theme="a">
	    	<h1>Copy Element?</h1>
	    </div>
	    <div role="main" class="ui-content">
	        <h3 class="ui-title">Are you sure you want to copy this element?</h3>
	    	<p>This action cannot be undone.</p>
	        <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
	        <a href="#" onclick="javascript:LP.copyElement();" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Copy</a>
	    </div>
	</div>
	<script type="text/javascript">

		var workspace, divPage;
		var currentClone = null;
		var LP = {

			changeTextPadding: function(){
				var paddingSide = jQuery("#padding-side").val();
				var textPadding = jQuery("#text-padding").val();

				switch(paddingSide){
					case 'all':
						jQuery(workspace.currentElement).css("padding", textPadding + 'px');
					break;
					case 'top':
						jQuery(workspace.currentElement).css("paddingTop", textPadding + 'px');
					break;
					case 'bottom':
						jQuery(workspace.currentElement).css("paddingBottom", textPadding + 'px');
					break;
					case 'left':
						jQuery(workspace.currentElement).css("paddingLeft", textPadding + 'px');
					break;
					case 'right':
						jQuery(workspace.currentElement).css("paddingRight", textPadding + 'px');
					break;
				}

			},

			changeTextAlign: function(){
				var textAlign = jQuery("#text-align").val();
				workspace.currentElement.elementTextAlign = textAlign;

				jQuery(workspace.currentElement).css("textAlign", textAlign);
			},

			changeFontsize: function()
			{
				var fontsize = jQuery("#text-font-size").val();
				workspace.currentElement.elementFontSize = fontsize;

				jQuery(workspace.currentElement).css("fontSize", fontsize + 'px');
				
			},

			changeWidth: function()
			{
				var width = jQuery("#width").val();
				workspace.currentElement.elementWidth = width;

				jQuery(workspace.currentElement).css("width", width);
			},

			changeHeight: function()
			{
				var height = jQuery("#height").val();
				workspace.currentElement.elementHeight = height;

				jQuery(workspace.currentElement).css("height", height);
			},

			changeZIndex: function()
			{
				var zindex = jQuery("#z-index").val();
				workspace.currentElement.elementZIndex = zindex;

				jQuery(workspace.currentElement).css("zIndex", zindex);
			},

			changeOpacity: function()
			{
				var opacity = jQuery("#opacity").val();
				workspace.currentElement.elementOpacity = opacity;

				jQuery(workspace.currentElement).css("opacity", opacity);
			},

			changeLinearGradient: function(){

				var angle = jQuery("#l-gradient-angle").val();
				var position = jQuery("#l-gradient-position").val();
				var yoffset = jQuery("#shadow-y-offset").val();
				var blur = jQuery("#shadow-blur-radius").val();
				var color = jQuery("#shadow-color").val();

			},

			changeShadow: function(){

				var inset = jQuery("#shadow-inset").val();
				var xoffset = jQuery("#shadow-x-offset").val();
				var yoffset = jQuery("#shadow-y-offset").val();
				var blur = jQuery("#shadow-blur-radius").val();
				var color = jQuery("#shadow-color").val();

				if(inset == 'on'){
					var styleInset = " inset ";
				} else {
					var styleInset = "";
				}

				workspace.currentElement.shadowInset = inset;
				workspace.currentElement.shadowXoffset = xoffset;
				workspace.currentElement.shadowYoffset = yoffset;
				workspace.currentElement.shadowBlur = blur;
				
				var id = jQuery(workspace.currentElement).attr("id");
				
				if(id){
					jQuery(workspace.document).find("#shadow_" + id).remove();
				} else {
					var rnd = Math.round(Math.random()*1000);
					id = "element_" + rnd;
					jQuery(workspace.currentElement).attr("id", id);
				}

				var style = "<style type='text/css' id='shadow_" + id + "'>#" + id + "{box-shadow: " + styleInset +xoffset+"px "+yoffset+"px "+blur+"px "+color+";}</style>";
				jQuery(workspace.document.head).append(style);

			},

			changeBorderStyle: function(){
				var style = jQuery("#border-style").val();
				workspace.currentElement.elementBorderStyle = style;

				jQuery(workspace.currentElement).css("borderStyle", style);
			},

			changeBorderWidth: function(){
				var width = jQuery("#border-width").val();
				workspace.currentElement.elementBorderWidth = width;

				jQuery(workspace.currentElement).css("borderWidth", width + "px");
			},

			changeBorder: function()
			{
				var radius = jQuery("#border-radius").val();
				workspace.currentElement.elementBorderRadius = radius;

				jQuery(workspace.currentElement).css("borderRadius", radius + "px");
			},

			initWorkspace: function()
			{
				workspace = document.getElementById("workspace").contentWindow;
				divPage = jQuery(workspace.document.body).find("#page");

				workspace.document.onclick = function(){

					if(workspace.elementStack.length){
						for(var i=0; i < workspace.elementStack.length; i++){
							jQuery(workspace.elementStack[i]).removeClass("element-active");
						}

						workspace.currentElement = null;
						document.getElementById("tools_section").style.display = 'none';
					}

				}

				window.onkeydown = function(e)
				{
					//Press Delete
					if(e.keyCode == 46){
						jQuery("#delete-element").click();
					}
				}
			},
			
			deleteElement: function()
			{
				if(workspace.currentElement){
					jQuery(workspace.currentElement).remove();
					workspace.currentElement = null;
					document.getElementById("tools_section").style.display = 'none';
				}
			},

			copyElement: function()
			{
				if(workspace.currentElement){
					currentClone = jQuery(workspace.currentElement).clone();
				}
			},

			pasteElement: function()
			{
				if(currentClone){
					if(workspace.currentElement){
						jQuery(workspace.currentElement).append(currentClone);
					} else {
						jQuery(divPage).append(currentClone);
					}
					
					workspace.bindResizable(currentClone, 'section');
					workspace.bindDraggable(currentClone, 'section');
				}
			},

			addElement: function(element)
			{

				switch(element){
					case 'section':
						var section = document.createElement("section");
						section.className = 'section';
												
						if(workspace.currentElement){
							jQuery(workspace.currentElement).append(section);
						} else {
							jQuery(divPage).append(section);
						}

						workspace.bindDraggable(section, 'section');
						workspace.bindResizable(section, 'section');
						

					break;
					case 'block':
						var block = document.createElement("div");
						block.className = 'block';
						
						if(workspace.currentElement){
							jQuery(workspace.currentElement).append(block);
						} else {
							jQuery(divPage).append(block);
						}

						workspace.bindResizable(block, 'div');
						workspace.bindDraggable(block, 'div');
						
					break;
				}
			}
		}

		


	</script>
</body>
</html>
